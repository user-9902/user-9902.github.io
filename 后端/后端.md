### MQ

消息队列（MQ）是分布式系统中不可或缺的技术之一。解耦、削峰，还是异步任务处理，都离不开MQ的身影。

##### 使用场景

异步处理：

用户下单后，需要发送短信（异步）通知下用户，为了不阻断订单的生成，将发送短信的任务交给MQ，继续处理订单的业务。即便短信业务挂了，MQ会把消息暂存后续也会保证短信的发送。

流量削峰：

商品秒杀时，高并发的请求会冲垮应用服务，干趴数据库。
直接将用户的请求置于MQ中，以保证应用服务的稳定。

服务解耦：

一个订单的完成，需要订单系统通知，库存系统、支付系统等系统，这样系统间就形成了依赖关系。
订单系统直接将消息交给MQ，库存、支付系统从MQ中消费消息即可。

延迟任务：

用户下单后，30分钟为付款，需要取消订单。

数据一致性：

