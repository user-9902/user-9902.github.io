import{_ as i,c as a,o as t,ag as n}from"./chunks/framework.DWIC34_G.js";const e="/docs/assets/1745463130346.BK3Bvj0e.jpg",g=JSON.parse('{"title":"HTTP","description":"","frontmatter":{},"headers":[],"relativePath":"network/http.md","filePath":"network/http.md","lastUpdated":null}'),l={name:"network/http.md"};function p(h,s,r,d,k,o){return t(),a("div",null,s[0]||(s[0]=[n('<h1 id="http" tabindex="-1">HTTP <a class="header-anchor" href="#http" aria-label="Permalink to &quot;HTTP&quot;">​</a></h1><p><img src="'+e+`" alt=""></p><h2 id="什么是http" tabindex="-1">什么是HTTP <a class="header-anchor" href="#什么是http" aria-label="Permalink to &quot;什么是HTTP&quot;">​</a></h2><p>HTTP（hypertext transfer protocol ）超文本传输协议，是用于传输超文本文档（HTML）的应用层协议，是为web浏览器与web服务器之间的通讯而设计的。</p><h2 id="http的特点" tabindex="-1">HTTP的特点 <a class="header-anchor" href="#http的特点" aria-label="Permalink to &quot;HTTP的特点&quot;">​</a></h2><ul><li>无状态：客户端打开一个链接发送请求，然后等待服务端响应，这个过程中服务端不会保存任何状态信息。</li><li>无连接：每次请求都需要建立一个新的TCP连接，请求完成后关闭连接。</li><li>请求-响应：客户端发送请求，服务端返回响应。</li><li>可拓展：http/1.0中加入的头信息，使得http的拓展变得非常容易。</li><li>明文传输：请求和响应以<strong>纯文本</strong>形式传输，TLS层的加入才解决了这个问题。</li></ul><h2 id="http的发展" tabindex="-1">HTTP的发展 <a class="header-anchor" href="#http的发展" aria-label="Permalink to &quot;HTTP的发展&quot;">​</a></h2><p>HTTP/0.9（1991年）</p><p>缺点：雏形阶段，仅支持<code>GET</code>方法，无头部、状态码或错误处理。<strong>只能传递纯文本</strong>。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GET /index.html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><p>HTTP/1.0（1996年，RFC 1945）</p><p>改进：首次标准化，引入<strong>HTTP头部</strong>（Headers）和<strong>状态码</strong>（如200、404）。</p><p>缺点：每个请求需新建TCP连接，性能低下。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GET /page.html HTTP/1.0</span></span>
<span class="line"><span>User-Agent: Mozilla/4.0</span></span>
<span class="line"><span>Accept: text/html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>HTTP/1.1（1999年，RFC 2616 → 2014年RFC 723X系列）</p><p>改进：</p><p>​ 管道化，允许连续发送多个请求； ​ 持久连接，复用TCP连接，减少握手开销； ​ 强制<code>Host</code>头部：支持虚拟主机（单IP托管多域名） ​ 缓存控制：强缓存、协商缓存。</p><p>缺点：</p><p>​ 队头阻塞：http顺序发送数据，导致后面的请求需要等待前面的请求完成。 ​ 并行连接限制：由于队头阻塞，http1.1可以建立多个TCP连接，但存在数量限制（6个）。 ​ 头部开销大：头信息通常重复且冗余。</p><hr><p>HTTP/2（2015年，RFC 7540）</p><p>改进：</p><p>​ 二进制分帧层：HTTP/2引入了二进制分帧层，在该层中上，传输的数据会被分割成更小的二进制帧进行传输；每个帧可以独立压缩和解压，这提高了传输效率；帧可以乱序发送，然后更具每个帧的首部的流标识重新组装。 ​ 多路复用：并发多个请求，解决队头阻塞。 ​ 头压缩：HPACK压缩算法压缩http头，字典表的方式，压缩通讯过程中传递的数据。 ​ 服务端推送：服务器可以在客户端请求之前主动推送资源到客户端，这样当客户端真正需要这些资源时，它们已经存在于客户端缓存中，减少了延迟时间。 ​ 优先级：HTTP/2允许为请求分配优先级，使得客户端可以指示哪些资源更重要，服务器可以根据这些优先级调整资源的发送顺序，从而优化用户体验</p><p>问题：</p><p>​ TCP队头阻塞（区别于http队头阻塞）：http2中传输的内容不再顺序发送，若需要传输的包1 2 3，1 3 到达 2 丢失，则3会被置于缓冲区形成阻塞。 ​ TCP与TLS叠加了握手时延：连接建立时间过长。 ​ 不适用移动状态下的无线网络：IP地址的频繁变动会导致TCP、TLS反复握手。</p><hr><ol start="5"><li><p>HTTP/3（2022年，RFC 9114）</p><p>改进：</p><p>​ 传输层改用UDP：解决TCP队头阻塞问题，提升弱网性能 ​ 0-RTT握手：减少连接建立延迟（尤其移动端）</p><p>​ 加密和安全：QUIC强制使用TLS 1.3</p><p>​ 减少队头阻塞：每个流都是独立的，流之间不会互相影响</p><p>​ 头压缩QPACK：HPACK的改进版本</p><p>​ 连接迁移：IP切换时保持连接（如WiFi切4G）</p></li></ol><h2 id="http请求结构" tabindex="-1">HTTP请求结构 <a class="header-anchor" href="#http请求结构" aria-label="Permalink to &quot;HTTP请求结构&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求结构</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contact_form.php </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// method / url / 协议/协议版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: developer.mozilla.org	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// headers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: application</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">www</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Joe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Send</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20me</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20one</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20of</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20your</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20catalogue	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// body body和头信息用空行隔开</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 响应结构</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> OK</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 协议/协议版本 状态码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">html; charset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">55743</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: keep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alive</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Cache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Control</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, public, max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Language</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: en</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">US</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DOCTYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// body 同样和头信息用空行隔开</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;A simple webpage&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Hello, world!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="http-method" tabindex="-1">HTTP Method <a class="header-anchor" href="#http-method" aria-label="Permalink to &quot;HTTP Method&quot;">​</a></h2><p>http方法，用于表明请求方本次请求的意图</p><ul><li>GET：请求URL对应的资源。幂等</li><li>POST：向服务端提交数据。不幂等</li><li>PUT：请求完整资源的替换 or 创建。幂等</li><li>PATCH：请求对部分资源进行修改，区别于PUT。不幂等</li><li>DELETE：删除对应资源。幂等</li><li>TRACE：用于诊断。反射用户请求的信息</li><li>OPTIONS：用于跨域预检测。或获取服务器所支持的method，支持的方法在Allow响应头中表明。</li><li>HEAD：类似get，但响应内容不包含body，用于下载场景中的预检。</li></ul><h2 id="http-状态码" tabindex="-1">HTTP 状态码 <a class="header-anchor" href="#http-状态码" aria-label="Permalink to &quot;HTTP 状态码&quot;">​</a></h2><p>状态码，用于表明响应内容的状态信息，方便浏览器或用户快速做出判断。</p><ul><li>1xx：继续。临时响应，请求已被接受，但不完整，请继续发送请求。 <ul><li>100：请求不完整，请继续发送请求</li><li>101：客户端更换协议，服务器支持 Upgrade header中对应的协议，等待客户继续发送请求。</li></ul></li><li>2xx：成功。本次请求被服务器接收、理解。 <ul><li>200：成功。</li><li>201：成功创建新资源。</li><li>202：成功，但不会被立刻处理，可能是批处理。</li><li>204：成功，但无body响应。</li><li>206：成功，但响应的数据为分片数据。</li></ul></li><li>3xx：重定向。 <ul><li>300：请求包含多个响应结构，用户自行选择。</li><li>301：永久重定向。</li><li>302：临时重定向。</li><li>304：响应body无更改，告知浏览器使用缓存。</li></ul></li><li>4xx：请求方错误。 <ul><li>401：缺乏身份认证信息。</li><li>403：无权访问。</li><li>404：请求的资源不存在。</li><li>405：服务器支持对应的method，但这次请求不支持，区别于501。</li><li>408：请求超时。</li></ul></li><li>5xx：服务端错误。 <ul><li>501：服务不支持该method</li><li>502：网关或代理服务器，从上游获取的响应是无效的</li><li>503：暂时无法处理请求，在维护或者超载了</li><li>504：网关或代理服务器的上游响应超时。</li></ul></li></ul><h2 id="http-header" tabindex="-1">HTTP Header <a class="header-anchor" href="#http-header" aria-label="Permalink to &quot;HTTP Header&quot;">​</a></h2><p>http头用于携带一些额外的上下文信息，这些信息可能是：</p><ul><li><strong>描述资源</strong>：提供关于所请求资源的信息，如其类型、大小等。</li><li><strong>控制缓存行为</strong>：指导浏览器或其他中间代理如何缓存资源，以提高性能和减少带宽使用。</li><li><strong>认证和授权</strong>：支持身份验证机制，确保只有授权用户才能访问特定资源。</li><li><strong>安全增强</strong>：通过设置如 <code>Content-Security-Policy</code>, <code>Strict-Transport-Security</code> 等头部来增加安全性。</li><li><strong>协商内容</strong>：允许客户端和服务器就文档格式、语言、编码等进行协商。</li><li><strong>状态报告</strong>：向客户端传达请求的结果状态。</li></ul><h5 id="常见header" tabindex="-1">常见Header <a class="header-anchor" href="#常见header" aria-label="Permalink to &quot;常见Header&quot;">​</a></h5><p>上下文相关header：</p><table tabindex="0"><thead><tr><th>Header</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>Host</td><td>发起请求的域名</td><td>Host: developer.mozilla.org</td></tr><tr><td>Origin</td><td>发起请求的源（协议+域名）</td><td>Origin: <a href="https://www.example.com" target="_blank" rel="noreferrer">https://www.example.com</a></td></tr><tr><td>Referer</td><td>发起请求的页面（完整url）</td><td>Referer: <a href="https://www.example.com/previous-page" target="_blank" rel="noreferrer">https://www.example.com/previous-page</a></td></tr><tr><td>User-Agent</td><td>发起方的程序的信息</td><td>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit......</td></tr><tr><td>Allow</td><td>响应方支持的http method</td><td>Allow: GET, POST, HEAD</td></tr><tr><td>Server</td><td>响应方的程序信息</td><td>Server: Apache/2.4.1 (Unix)</td></tr><tr><td>Date</td><td>格林尼治时间戳</td><td>Date: Wed, 21 Oct 2015 07:28:00 GMT</td></tr></tbody></table><p>http响应内容的描述信息：</p><table tabindex="0"><thead><tr><th>Header</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>Content-type</td><td>表明http响应主体的 MIME 格式</td><td>Content-Type: text/html; charset=UTF-8</td></tr><tr><td>Content-length</td><td>表明http响应主体的长度（字节）</td><td>Content-Length: 348</td></tr><tr><td>Content-Encoding</td><td>表明http响应主体的压缩方式</td><td>Content-Encoding: gzip</td></tr><tr><td>Content-Range</td><td>表明在分片加载中，该部分响应在完整响应中的位置</td><td>Content-Range: bytes 200-1000/67589</td></tr><tr><td>Content-Disposition</td><td>表明响应的内容用以展示、还是下载。</td><td>Content-Disposition: attachment; filename=&quot;filename.jpg&quot;</td></tr></tbody></table><p>http请求方的需求信息：</p><table tabindex="0"><thead><tr><th>Header</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>Accept</td><td>表明请求方希望得到的响应主体的 MIME 类型</td><td>Accept: image/avif,image/webp,image/*;q=0.8</td></tr><tr><td>Accept-Encoding</td><td>表明请求方希望得到的响应主体的编码（压缩算法）类型</td><td>Accept-Encoding: gzip, compress, br, zstd</td></tr><tr><td>Accept-Language</td><td>表明请求方希望得到的响应主体的自然语言</td><td>Accept-Language: zh-CN,en;q=0.5</td></tr><tr><td>Accept-Ranges</td><td>表明响应方分块的标记（分块下载场景）</td><td>Accept-Ranges: bytes</td></tr></tbody></table><p>其他常见：</p><table tabindex="0"><thead><tr><th>Header</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>Location</td><td>重定向的地址信息</td><td>Location: /index.html</td></tr><tr><td>Connection</td><td>http keep-alive</td><td>Connection: keep-alive</td></tr><tr><td>Accept-Language</td><td>表明请求方希望得到的响应主体的自然语言</td><td>Accept-Language: zh-CN,en;q=0.5</td></tr><tr><td>Accept-Ranges</td><td>表明响应方分块的标记（分块下载场景）</td><td>Accept-Ranges: bytes</td></tr></tbody></table><h2 id="http分片" tabindex="-1">HTTP分片 <a class="header-anchor" href="#http分片" aria-label="Permalink to &quot;HTTP分片&quot;">​</a></h2><h2 id="http-压缩" tabindex="-1">HTTP 压缩 <a class="header-anchor" href="#http-压缩" aria-label="Permalink to &quot;HTTP 压缩&quot;">​</a></h2><p>对于需要传输的大体积资源，浏览器和服务器之间可以协商压缩体积来优化响应速度。 建议对图片、音频、视频的传输都进行压缩。常见的压缩算法有 gzip、deflate。</p><p>Accept-Encoding 请求头表明自己支持的压缩算法</p><p>Content-Encoding 响应头告知该次请求的主体使用了那种压缩方式。</p><h2 id="http-缓存" tabindex="-1">HTTP 缓存 <a class="header-anchor" href="#http-缓存" aria-label="Permalink to &quot;HTTP 缓存&quot;">​</a></h2><p>HTTP提供一系列的缓存控制策略，来优化响应速度，我们通过相关http头来配置缓存策略。</p><p>强缓存：</p><ul><li>Expires：响应资源时，通过 Expires 响应头告知浏览器文件的过期日期，但由于对比日期于用户的机器时间有关，不建议使用。</li><li>Cache-control：响应资源时，通过 Cache-control 响应头设置强缓存策略（max-age=10000, public）。用户再次请求该资源时，若未超时，就不会再次咨询服务器。</li></ul><p>弱（协商缓存）缓存：</p><ul><li>last-modified； If-Modified-Sinc： 响应资源时通过 last-modified 告知浏览器资源最后一次修改的时间，客户端再次请求相同资源时将（前述last-modified）修改时间，通过请求头 If-Modified-Since 携带上，交由服务端判断资源是否需要使用缓存。（无变化返回 304）</li><li>ETag ；if-None-Match ：响应资源时通过 ETag 告知浏览器文件的hash签名，下次请求时，浏览器通过请求头 if-None-Match 携带上（前述ETag）hash签名，交由服务端判断资源是否使用缓存。</li></ul><p>私有缓存：强缓存中 Cache-Control 响应头设置了 private，则表示该资源是浏览器缓存，不希望代理服务器缓存。</p><p>共享缓存: 强缓存中 Cache-Control 响应头设置了 public，则表示该资源可以在代理服务器上缓存，还可以通过 s-max-age 来控制缓存在代理中的有效时间。</p><p>浏览器缓存策略优先级：</p><p>Service Worker -&gt; Memory Cache -&gt; Disk Cache -&gt; Push Cache。内存缓存</p><h2 id="cookies" tabindex="-1">Cookies <a class="header-anchor" href="#cookies" aria-label="Permalink to &quot;Cookies&quot;">​</a></h2><p>http是无状态的(需要cookies来调味)，事务前后不具有连续性，cookies的加入便是用来存储一些状态信息。</p><p>服务端可以通过 set-cookies 响应头来设置cookies，可以对cookies的有效期、domain、是否使用https等作出限制。这些cookies会存储在浏览器中，当客户下次发起请求时，会自动携带上cookies。</p><ul><li><p>domain：控制目标，控制我们在请求哪些域名时携带cookies。</p></li><li><p>same-site：控制来源。</p></li><li><p>sameparty：将多个域名视为同一集合，他们设置的cookies集合内的成员共享。在服务器中添加配置文件 .well-know/first-party-set 配置域名集合。</p></li></ul><h2 id="安全策略" tabindex="-1">安全策略 <a class="header-anchor" href="#安全策略" aria-label="Permalink to &quot;安全策略&quot;">​</a></h2><h4 id="同源策略" tabindex="-1">同源策略 <a class="header-anchor" href="#同源策略" aria-label="Permalink to &quot;同源策略&quot;">​</a></h4><p>同源策略指 <strong>协议+域名+端口</strong> 三者皆相同</p><h4 id="cors" tabindex="-1">CORS <a class="header-anchor" href="#cors" aria-label="Permalink to &quot;CORS&quot;">​</a></h4><p>在浏览器的同源策略限制下，用户只能访问同域名下的资源以保证安全。但同时提供了CORS 跨域资源共享的机制，CORS是一种基于http头的安全机制。</p><p>简单请求：GET、HEAD、POST、浏览器不会触发跨域预检(OPTIONS)。直接响应的内容中包含跨域控制header。</p><p>非简单请求：PUT、DELETE、自定义header等会触发跨域预检测。</p><p>跨域控制header：</p><ul><li>Access-Control-Allow-Credentials：是否允许发送cookies</li><li>Access-Control-Allow-Headers：允许使用的header</li><li>Access-Control-Allow-Methods：允许的method</li><li>Access-Control-Allow-Origin：允许哪些源访问</li><li>Access-Control-Max-Age：预检请求结果的缓存时间</li></ul><h4 id="csp" tabindex="-1">CSP <a class="header-anchor" href="#csp" aria-label="Permalink to &quot;CSP&quot;">​</a></h4><p>Content-Security-Policy 该响应头为网站管理员提供控制权，以控制哪些资源可以被浏览器加载和执行。主要用于防止XSS攻击和其他脚本注入攻击。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Content-Security-Policy: default-src &#39;self&#39;; script-src &#39;self&#39; https://apis.google.com;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>default-src</strong>: 定义默认加载策略，适用于其他未单独指定策略的资源类型。</li><li><strong>script-src</strong>: 指定允许加载的脚本来源。</li><li><strong>style-src</strong>: 指定允许加载的样式表来源。</li><li><strong>img-src</strong>: 指定允许加载的图片来源。</li><li><strong>connect-src</strong>: 限制可与哪些URL进行通信（如 XMLHttpRequest, WebSocket 等）。</li><li><strong>frame-src</strong>：加载到frame和iframe中的合法源。</li></ul><h4 id="hsts" tabindex="-1">HSTS <a class="header-anchor" href="#hsts" aria-label="Permalink to &quot;HSTS&quot;">​</a></h4><p>Strict-Transport-Security 该响应头，强制浏览器使用https协议进行通讯。即使用户手动输入了http，浏览器也会将其自动转化为https</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Strict-Transport-Security: max-age=31536000; includeSubDomains</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>max-age</strong>: 指定以秒为单位的时间长度，在此期间浏览器应仅通过HTTPS访问该站点。</li><li><strong>includeSubDomains</strong>（可选）: 如果设置了此参数，表示规则同样适用于所有子域名。</li></ul><h2 id="https" tabindex="-1">https <a class="header-anchor" href="#https" aria-label="Permalink to &quot;https&quot;">​</a></h2><p>http在网络中命文传输信息是不安全的，https 在 http 和 TCP 协议之间添加了TLS层，通过非对称加密，保障数据在网络中的安全。</p><p>TLS五次协商</p><ol><li>Client 向 Server 请求建立连接。</li><li>Server 将自己的证书发送给 Client。</li><li>Client 验证证书，然后使用证书中的公钥加密接下来要用来通信的密钥，将加密结果发送给 Server。</li><li>Server 收到后进行响应，且将用该密钥来对需要发送或接收的上层数据进行加解密。</li><li>自此 TLS 握手完成，接下来开始使用密钥进行通信。</li></ol><p>在原生应用中，还有着更灵活的安全策略：</p><p>公钥固定：（Client 端验证 Server端的身份）Client端内置了Server端的公钥，Server端发送的公钥证书必须与Client端内置的公钥一致请求才会成功。</p><p>双向认证：（Client端，Server端认证彼此的身份）除了上述公钥固定，Client还内置了一套公私钥，Server端会向Client端请求公钥，以验证Client端的身份。</p><h2 id="api架构" tabindex="-1">API架构 <a class="header-anchor" href="#api架构" aria-label="Permalink to &quot;API架构&quot;">​</a></h2><p>REST</p><p>RESTful API 是基于 HTTP 协议的利用标准的 HTTP 方法（如 GET、POST、PUT、DELETE 等）来操作资源。特点“</p>`,94)]))}const E=i(l,[["render",p]]);export{g as __pageData,E as default};
